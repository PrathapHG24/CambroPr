<!-- // parent div  -->
<div class="open-batch">
  <div *ngIf="!isUserAdmin()">
    <button
      type="button"
      class="btn btn-success"
      (click)="opennConnectModal(table)"
      *ngIf="!showAddBatch"
    >
      <!-- <a href="/scheduler">Open Batch</a> -->
      Open batch
    </button>
  </div>
</div>
<div class="schedulerId" *ngIf="showAddBatch">
  <label for="scheduler-id">Add Scheduler Id</label>
  <input
    type="text"
    name=""
    id="sceduler"
    [(ngModel)]="schedulerId"
    (input)="insertDataInSelectedTable()"
  />
  <!-- <button type="submit" (click)="showAddBatch = false; matchedTables = []">
    Cancel
  </button> -->
  <button type="button" (click)="clearSchedulerId()" *ngIf="!selectedTable">
    Cancel
  </button>
  <button type="button" (click)="getSchedulerData()" *ngIf="!selectedTable">
    Ok
  </button>
  <!-- <button type="button" (click)="insertDataInSelectedTable()" *ngIf="selectedTable && selectedTable.tableName">Insert</button> -->
</div>
<!-- <button type="button" (click)="checkingSchedule()" class="btn btn-success">
    Schedule checker
  </button> -->
<!-- <button type="button" (click)="getResponse()" class="btn btn-success">
    response checker
  </button>
  <button type="button" (click)="importJSONDATA()" class="btn btn-success">
    importer
  </button> -->
<div *ngIf="matchedTables.length > 0 && showAddBatch">
  <!-- <p>Schedule Id: {{schedulerId}}</p> -->
  <table>
    <tr>
      <th>Table Name</th>
      <th>Database Name</th>
    </tr>
    <tr *ngFor="let _table of matchedTables; let i = index">
      <td>{{ _table.tableName }}</td>
      <td>{{ _table.databaseName }}</td>
      <td *ngIf="!selectedTable">
        <button (click)="SaveTable(_table, i)" class="btn btn-success">
          INSERT DATA
        </button>
      </td>
    </tr>
  </table>

  <div *ngIf="selectedTable" class="insertData">
    <table>
      <tr>
        <th *ngFor="let item of insertDataResponse | keyvalue">
          {{ item.key }}
        </th>
      </tr>
      <tr>
        <td *ngFor="let item of insertDataResponse | keyvalue">
          {{ item.value }}
        </td>
      </tr>
    </table>
  </div>
  <button
    class="btn btn-info"
    style="margin: 1rem auto"
    (click)="onCloseBatchConfirmation()"
  >
    Close Batch
  </button>
</div>

<div *ngIf="isUserAdmin()">
  <div class="container-xl">
    <div class="table-responsive">
      <div class="table-wrapper">
        <div class="table-title">
          <div class="row">
            <div class="col-sm-6">
              <h4><b>Available Databases</b></h4>
            </div>
            <div class="col-sm-6">
              <button
                *ngIf="isUserAdmin()"
                class="btn btn-success"
                (click)="addUser()"
              >
                <i class="fas fa-plus-circle"></i><span> Add User</span>
              </button>
              <button
                *ngIf="isUserAdmin()"
                class="btn btn-success"
                (click)="AddDatabase()"
              >
                <i class="fas fa-plus-circle"></i><span> Add Database</span>
              </button>
              <button class="btn btn-success" (click)="reload()" *ngIf="false">
                <i class="fas fa-plus-circle"></i><span> Reload</span>
              </button>
            </div>
          </div>
        </div>
        <table
          class="table table-striped table-hover table-bordered table-content"
        >
          <thead>
            <tr class="center-align">
              <th>Database Name</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let database of databaseList" class="center-align">
              <td>{{ database.name }}</td>
              <td>
                <a
                  href="#"
                  routerLink="/view-database/"
                  [queryParams]="{ database: database.name }"
                  class="btn"
                  ><i class="fas fa-eye view"></i
                ></a>
                <!-- <a href="#" [routerLink]="['/Editdatabase/', database.name]" class="btn"><i
                  class="fa fa-edit edit"></i></a> -->
                <button
                  *ngIf="isUserAdmin()"
                  type="button"
                  (click)="deletedatabaseConfirmation(database)"
                  class="btn"
                >
                  <i class="fas fa-trash-alt delete"></i>
                </button>
              </td>
            </tr>
            <tr>
              <td *ngIf="databaseList.length == 0" colspan="6">
                No database Found
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      <!-- <div class="json-import-section">
        <h4><b>Import JSON</b></h4>
        <textarea
          [(ngModel)]="jsonInput"
          placeholder="Enter JSON here..."
          rows="4"
          cols="50"
        ></textarea>
        <button class="btn btn-success" (click)="importJSON()">Import</button>
      </div> -->
    </div>
  </div>
</div>
